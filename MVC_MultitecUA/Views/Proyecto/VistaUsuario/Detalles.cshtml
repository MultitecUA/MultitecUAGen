@model MultitecUAGenNHibernate.EN.MultitecUA.ProyectoEN

@{
    ViewBag.Title = "Detalles";
}

<h2>Detalles del Proyecto: @ViewData["titulo"]</h2>
<p class="text-center">
    <label>@Html.ActionLink("Inicio", "Index", "Home")</label><span> >> </span><label>@Html.ActionLink("Todos los Proyectos", "ProyectosPresentados")</label><span> >> </span><label>@ViewBag.Title</label>
</p>
<div>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Nombre)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Nombre)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Descripcion)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Descripcion)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Estado)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Estado)
        </dd>

        <dt>
            Creador
        </dt>

        <dd>
            @Html.ActionLink(ViewData["creador"].ToString(), "Detalles", "Usuario", new { nick = ViewData["creador"] }, null)
        </dd>

        <dt>
            Moderadores:
        </dt>

        <dd>
            <ul>

                @{
                    foreach (var e in (System.Collections.IEnumerable)ViewData["listaModeradores"])
                    {
                        <li>@Html.ActionLink(e.ToString(), "Detalles", "Usuario", new { nick = e }, null)</li>
                    }
                }
            </ul>
        </dd>

        <dt>
            Participantes:
        </dt>

        <dd>
            <ul>

                @{
                    foreach (var e in (System.Collections.IEnumerable)ViewData["listaParticipantes"])
                    {
                        <li>@Html.ActionLink(e.ToString(), "Detalles", "Usuario", new { nick = e }, null)</li>
                    }
                }
            </ul>
        </dd>

        <dt>Categorías Proyecto:</dt>
        <dd>
            <ul>

                @{
                    foreach (var e in (System.Collections.IEnumerable)ViewData["listaCategoriasProyectoEliminar"])
                    {
                        <li style="font-weight: normal;">@e </li>
                    }
                }
            </ul>
        </dd>

        <dt>Categorías Usuario:</dt>
        <dd>
            <ul>

                @{
                    foreach (var e in (System.Collections.IEnumerable)ViewData["listaCategoriasUsuarioEliminar"])
                    {
                        <li style="font-weight: normal;">@e </li>
                    }
                }
            </ul>
        </dd>

    </dl>

    @if (ViewData["esModerador"] != null)
    {
        <div class="dl-horizontal">
            @using (Html.BeginForm("AgregarCatPro", "Proyecto"))
            {
                @Html.HiddenFor(model => model.Id)
                <div class="form-horizontal form-group form-inline">
                    <label>Agregar Categoría de Proyecto:</label>
                    @Html.DropDownList("CategoriaPro", new SelectList((System.Collections.IEnumerable)ViewData["listaCategoriasProyectoAgregar"]), new { @class = "form-control" })
                    <input type="submit" value="Agregar" class="btn btn-default" />
                </div>
            }

            @using (Html.BeginForm("EliminarCatPro", "Proyecto"))
            {
                @Html.HiddenFor(model => model.Id)
                <div class="form-horizontal form-group form-inline">
                    <label>Eliminar Categoría de Proyecto:</label>
                    @Html.DropDownList("CategoriaPro", new SelectList((System.Collections.IEnumerable)ViewData["listaCategoriasProyectoEliminar"]), new { @class = "form-control" })
                    <input type="submit" value="Eliminar" class="btn btn-default" />
                </div>
            }
        </div>

        <div class="dl-horizontal">
            @using (Html.BeginForm("AgregarCatUsu", "Proyecto"))
            {
                @Html.HiddenFor(model => model.Id)
                <div class="form-horizontal form-group form-inline">
                    <label>Agregar Categoría de Usuario:</label>
                    @Html.DropDownList("CategoriaUsu", new SelectList((System.Collections.IEnumerable)ViewData["listaCategoriasUsuarioAgregar"]), new { @class = "form-control" })
                    <input type="submit" value="Agregar" class="btn btn-default" />
                </div>
            }

            @using (Html.BeginForm("EliminarCatUsu", "Proyecto"))
            {
                @Html.HiddenFor(model => model.Id)
                <div class="form-horizontal form-group form-inline">
                    <label>Eliminar Categoría de Usuario:</label>
                    @Html.DropDownList("CategoriaUsu", new SelectList((System.Collections.IEnumerable)ViewData["listaCategoriasUsuarioEliminar"]), new { @class = "form-control" })
                    <input type="submit" value="Eliminar" class="btn btn-default" />
                </div>
            }
        </div>
    }

    </div>

<div>
    @if (ViewData["esModerador"] != null)
    {
        <p>
            @Html.ActionLink("Administrar solicitudes", "AdministrarSolicitudes", "Solicitud", new { proyectoId = Model.Id }, new { @class = "btn btn-default" })
            @Html.ActionLink("Cambiar estado", "ChangeEstado", new { id = Model.Id }) |
            @Html.ActionLink("Gestionar Eventos", "GestionEventos", new { id = Model.Id }) |
            @Html.ActionLink("Gestionar Participantes", "GestionParticipantes", new { id = Model.Id }) |
            @Html.ActionLink("Gestionar Moderadores", "GestionModeradores", new { id = Model.Id })
        </p>
        <p>
            @Html.ActionLink("Modificar", "Edit", new { id = Model.Id }) |
            @Html.ActionLink("Eliminar", "Delete", new { id = Model.Id })
        </p>
    }
    else if (ViewData["noParticpante"] != null && ViewData["noParticpante"].ToString() == "true")
    {
        @Html.ActionLink("Enviar solicitud", "EnviarSolicitud", "Solicitud", new { proyectoId = Model.Id }, new { @class = "btn btn-default" })
    }
    @Html.ActionLink("Volver a la lista", "ProyectosPresentados")
</div>
